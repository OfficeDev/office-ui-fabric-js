<!-- Copyright (c) Microsoft. All rights reserved. Licensed under the MIT license. See LICENSE in the project root for license information. -->
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<title>Office Fabric JS</title>
    <link rel="stylesheet" href="../styles.css">
	<link rel="stylesheet" href="../css/fabric.min.css">
	<link rel="stylesheet" href="../css/fabric.components.min.css">
</head>
<body>
    <div id="main">
        <div class="ms-Fabric ms-font-m App">
            <header class="od-Header">
                <div class="od-Header-banner">
                    <div class="od-Header-logo">
                        <div class="od-Logo-link">
                            <img src="./images/logo-office-dev.svg" width="190" height="48" alt="Office dev center logo image">
                        </div>
                    </div>
                </div>
            </header>
            <div class="App-wrapper">
                <div class="App-nav">
                    <nav class="nav">
                        <ul class="links">
                            <li class="link isHomePage fabricPage">
                                <a href="#/" title="Home page" aria-label="Home Page">Fabric JS</a>
                            </li>
                            <li class="link getStartedPage">
                                <a href="#!/GetStarted">Get Started</a>
                            </li>
                            <li class="link linkToggle jsComponents">
                                <a href="#">JS Components</a>
                                <ul class="links isSubMenu">
                                    <% components.forEach(function(component) { %>
                                        <li class="link">
                                            <a href="#!/Components/<%= component.name %>/<%= component.name %>"><%= component.name %></a>
                                        </li>
                                    <% }); %>
                                </ul>
                            </li>
                            <li class="link backToFabricSite">
                                <a href="#">Back to Fabric Site</a>
                            </li>
                        </ul>
                    </nav>
                </div>
                <div id="mainContent" class="App-content">
                    {{ renderDocPage props=props }}
                </div>
            </div>
        </div>
    </div>
</body>
<script>
(function(){
    var mainContainer = document.getElementById('mainContent');
    var toggleLinks = document.querySelectorAll('.linkToggle > a');
    var navLinks = document.getElementsByTagName('a');
    function linkToggle() {
        (this.parentNode.classList.contains('isActive')) ?
        this.parentNode.classList.remove('isActive') :
        this.parentNode.classList.add('isActive');
    }


    for (var i = 0; i < toggleLinks.length; i++) {
        toggleLinks[i].addEventListener('click', linkToggle);
    }

    function navLinkAction(e) {
        e.preventDefault();
        var url = this.getAttribute('href');
        var pattern = new RegExp(/\w+/, 'g');
        var urlSections = [];
        console.log(url);
        var match = null;
        while (match = pattern.exec(url)) {
            console.log(match);
            urlSections.push(match[0]);
        }

        if (urlSections.length) {
            var path = "./";
            urlSections.forEach(function(section, idx) {
                var end = (idx === urlSections.length - 1) ? ".html" : "/";
                path += section + end;
            });
            console.log(path);

            var xhr= new XMLHttpRequest();
            xhr.open('GET', path, true);
            xhr.onreadystatechange= function() {
                if (this.readyState!==4) return;
                if (this.status!==200) return; // or whatever error handling you want
                mainContainer.innerHTML= this.responseText;
            };
            xhr.send();
        }
    }


    for (var i = 0; i < navLinks.length; i++) {
        navLinks[i].addEventListener('click', navLinkAction);
    }


})();

    
</script>
</html>